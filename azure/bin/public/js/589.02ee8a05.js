"use strict";(self["webpackChunkRaptorNodes"]=self["webpackChunkRaptorNodes"]||[]).push([[589],{36589:(e,t,a)=>{a.r(t),a.d(t,{default:()=>H});var l=a(83673),o=a(62323),n=a(98880);const i={style:{"max-width":"1024px",margin:"0 auto"}},s={class:"text-h5 text-amber col-12 q-pa-sm"},d={style:{}},u=(0,l.Uk)("ReStore database"),r={class:""},c=(0,l._)("div",{class:"text-h5 text-amber col-12 q-pa-sm"}," Config schedule backup ",-1);function m(e,t,a,m,p,w){const b=(0,l.up)("q-separator"),h=(0,l.up)("q-btn"),g=(0,l.up)("q-space"),f=(0,l.up)("q-input"),_=(0,l.up)("q-select"),v=(0,l.up)("q-th"),y=(0,l.up)("q-tr"),q=(0,l.up)("q-td"),k=(0,l.up)("q-tooltip"),W=(0,l.up)("q-table"),C=(0,l.up)("q-bar"),Z=(0,l.up)("q-card-section"),D=(0,l.up)("q-card-actions"),S=(0,l.up)("q-form"),Q=(0,l.up)("q-card"),x=(0,l.up)("q-dialog"),A=(0,l.up)("q-page"),$=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(A,{class:"row items-center justify-evenly q-pa-lg",style:{display:"block"}},{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l._)("div",s,(0,o.zw)(e.documentName),1),(0,l.Wm)(b,{spaced:""}),(0,l._)("div",d,[(0,l.Wm)(W,{rows:e.docs,columns:e.columns,"row-key":"_id",dark:"","visible-columns":e.visibleColumns,style:{width:"100%"},pagination:e.initialPagination,filter:e.search,loading:e.loading,class:"card-dark",color:"amber"},{top:(0,l.w5)((()=>[(0,l.Wm)(h,{label:"Create new "+e.documentName,icon:"eva-cloud-download-outline",onClick:t[0]||(t[0]=t=>e.dialog=!0),push:""},null,8,["label"]),(0,l.Wm)(g),(0,l.Wm)(h,{icon:"eva-refresh-outline",push:"",round:"",dense:"",style:{"margin-right":"6px"},onClick:e.getDocuments},null,8,["onClick"]),(0,l.Wm)(f,{modelValue:e.search,"onUpdate:modelValue":t[1]||(t[1]=t=>e.search=t),dense:"",placeholder:"Search "+e.documentName+"..."},null,8,["modelValue","placeholder"]),(0,l.Wm)(_,{modelValue:e.visibleColumns,"onUpdate:modelValue":t[2]||(t[2]=t=>e.visibleColumns=t),multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])])),header:(0,l.w5)((e=>[(0,l.Wm)(y,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{"auto-width":""}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cols,(t=>((0,l.wg)(),(0,l.j4)(v,{key:t.name,props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(t.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,l.w5)((t=>[(0,l.Wm)(y,{props:t},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{"auto-width":""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{size:"sm",color:"accent",round:"",dense:"",onClick:e=>t.expand=!t.expand,icon:t.expand?"remove":"eva-eye-outline"},null,8,["onClick","icon"])])),_:2},1024),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.cols,(e=>((0,l.wg)(),(0,l.j4)(q,{key:e.name,props:t},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.value),1)])),_:2},1032,["props"])))),128)),(0,l.Wm)(q,{"auto-width":""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{size:"sm",class:"text-red",round:"",dense:"",onClick:a=>e.deleteDocument(t.row),icon:"eva-trash-2-outline"},null,8,["onClick"]),(0,l.Wm)(h,{size:"sm",round:"",dense:"",onClick:a=>e.editDocument(t.row),icon:"eva-cloud-download-outline"},null,8,["onClick"]),(0,l.Wm)(h,{size:"sm",round:"",dense:"",onClick:a=>e.reStore(t.row),icon:"eva-sync-outline"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[u])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["props"]),(0,l.wy)((0,l.Wm)(y,{props:t},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{colspan:"100%"},{default:(0,l.w5)((()=>[(0,l._)("div",r,(0,o.zw)(t.row.answer),1)])),_:2},1024)])),_:2},1032,["props"]),[[n.F8,t.expand]])])),_:1},8,["rows","columns","visible-columns","pagination","filter","loading"])]),c,(0,l.Wm)(b,{spaced:""})]),(0,l.Wm)(x,{modelValue:e.dialog,"onUpdate:modelValue":t[4]||(t[4]=t=>e.dialog=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{style:{"min-width":"30vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(C,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,(0,o.zw)(e.isEdit?"Edit ":"Create new")+" "+(0,o.zw)(e.documentName),1),(0,l.Wm)(g)])),_:1}),(0,l.Wm)(S,{onSubmit:e.onSubmit},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{style:{overflow:"hidden","min-width":"320px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"q-pa-sm",modelValue:e.doc.label,"onUpdate:modelValue":t[3]||(t[3]=t=>e.doc.label=t),label:"Label",rules:[e=>""!==e||"Label required"]},null,8,["modelValue","rules"])])),_:1}),(0,l.Wm)(D,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(h,{flat:"",label:"CLOSE",color:"red"},null,512),[[$]]),(0,l.Wm)(h,{flat:"",label:e.isEdit?"Update":"Create",color:"primary",type:"submit"},null,8,["label"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])])),_:1})}var p=a(14250),w=a(85777),b=a(64434),h=a(49968);const g=h.Ps`
  mutation reStore($_id:String!){
    reStore(_id: $_id){
      _id
      path
      label
      createdAt
      updatedAt
    }
  }
`,f=h.Ps`
  mutation createFaq($label:String!){
    createBackup(label: $label){
      _id
      path
      label
      createdAt
      updatedAt
    }
  }
`,_=h.Ps`
  mutation createFaq($_id: String!){
    deleteFaq(_id:$_id){
      _id
    }
  }
`,v=h.Ps`
  query {
  backups{
    _id
    path
    label
    createdAt
    updatedAt
  }

  }
`;var y=a(3515),q=function(e,t,a,l){var o,n=arguments.length,i=n<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,a):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,l);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(n<3?o(i):n>3?o(t,a,i):o(t,a))||i);return n>3&&i&&Object.defineProperty(t,a,i),i};let k=class extends w.w3{formatPrice=p.T;documentName="Backup";dialog=!1;isEdit=!1;loading=!1;search="";doc={label:""};docs=[];visibleColumns=["label","updatedAt"];initialPagination={sortBy:"updatedAt",descending:!0,page:1,rowsPerPage:10};columns=[{name:"label",required:!0,label:"label",align:"left",field:"label",sortable:!0},{name:"createdAt",label:"createdAt",align:"center",field:"createdAt",sortable:!0},{name:"updatedAt",label:"updatedAt",align:"center",field:"updatedAt",sortable:!0}];onReset(){this.doc={label:""}}async onSubmit(){await this.createDocument()}async getDocuments(){this.loading=!0;const e=await this.$apollo.query({query:v});this.docs=e.data.backups,this.loading=!1}deleteDocument(e){console.log("haha"),this.$q.dialog({title:"Delete",message:"You may want to delete?",cancel:!0,persistent:!0}).onOk((()=>{this.$apollo.mutate({mutation:_,variables:{_id:e._id}}).then((()=>{this.getDocuments().then()}))}))}editDocument(e){window.open(y.Z.server+"/backup/file/"+e.path,"_blank")}reStore(e){this.$q.dialog({title:"Restore",message:"You may want to Restore?",cancel:!0,persistent:!0}).onOk((()=>{this.$apollo.mutate({mutation:g,variables:{_id:e._id}}).then((()=>{this.getDocuments().then()}))}))}async createDocument(){const e=await this.$apollo.mutate({mutation:f,variables:this.doc});e&&e.data?(this.dialog=!1,this.$q.notify({message:"Create Done"}),this.onReset(),await this.getDocuments()):this.$q.notify({message:"Create error:",color:"red"})}sendContact(){b.Z.create({message:"Send contact Done!",position:"center"})}async created(){await this.getDocuments()}};k=q([(0,w.Ei)({name:"FagIndex",components:{}})],k);const W=k;var C=a(74260),Z=a(24379),D=a(65869),S=a(30673),Q=a(2165),x=a(62025),A=a(64689),$=a(63314),P=a(18186),V=a(92414),z=a(83884),R=a(5363),U=a(46778),j=a(10151),N=a(10846),E=a(68689),F=a(25589),O=a(99367),T=a(60677),B=a(7518),Y=a.n(B);const L=(0,C.Z)(W,[["render",m]]),H=L;Y()(W,"components",{QPage:Z.Z,QSeparator:D.Z,QTable:S.Z,QBtn:Q.Z,QSpace:x.Z,QInput:A.Z,QSelect:$.Z,QTr:P.Z,QTh:V.Z,QTd:z.Z,QTooltip:R.Z,QDialog:U.Z,QCard:j.Z,QBar:N.Z,QForm:E.Z,QCardSection:F.Z,QCardActions:O.Z}),Y()(W,"directives",{ClosePopup:T.Z})}}]);