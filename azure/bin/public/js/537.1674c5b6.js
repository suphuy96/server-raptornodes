"use strict";(self["webpackChunkRaptorNodes"]=self["webpackChunkRaptorNodes"]||[]).push([[537],{77537:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Ce});var t=l(83673),o=l(62323),s=l(98880);const i={style:{"max-width":"1024px",margin:"0 auto"}},d={class:"text-h5 text-amber col-12 q-pa-sm"},r={style:{}},n=["src"],u={class:"q-pa-sm"},m=(0,t.Uk)(" Name "),c={class:"text-amber"},w=(0,t.Uk)(" Email "),p={class:"text-amber"},f=(0,t.Uk)(" Private wallet "),b={class:"text-amber"},h=(0,t.Uk)(" Current Balance "),_={class:"text-amber"},g=(0,t.Uk)(" Collateral "),y={class:"text-amber"},W=(0,t.Uk)(" Portfolio "),v={class:"text-amber"},k=(0,t.Uk)(" Discord ID "),q={class:"text-amber"},U=(0,t.Uk)(" discord "),C={class:"text-amber"},x=(0,t.Uk)(" discord Name "),D={class:"text-amber"},R=(0,t.Uk)(" discord Avatar "),Z=["src"],$={class:"q-pa-md"},A=(0,t._)("div",null,"Reward History",-1);function P(e,a,l,P,S,T){const Q=(0,t.up)("q-separator"),z=(0,t.up)("q-space"),V=(0,t.up)("q-btn"),H=(0,t.up)("q-input"),E=(0,t.up)("q-select"),j=(0,t.up)("q-th"),N=(0,t.up)("q-tr"),M=(0,t.up)("q-td"),O=(0,t.up)("q-avatar"),F=(0,t.up)("q-item-section"),B=(0,t.up)("q-item"),I=(0,t.up)("q-list"),L=(0,t.up)("q-table"),Y=(0,t.up)("q-bar"),K=(0,t.up)("q-card-section"),G=(0,t.up)("q-card-actions"),J=(0,t.up)("q-form"),X=(0,t.up)("q-card"),ee=(0,t.up)("q-dialog"),ae=(0,t.up)("q-icon"),le=(0,t.up)("reward-history"),te=(0,t.up)("q-page"),oe=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(te,{class:"row items-center justify-evenly q-pa-lg",style:{display:"block"}},{default:(0,t.w5)((()=>[(0,t._)("div",i,[(0,t._)("div",d,(0,o.zw)(e.documentName),1),(0,t.Wm)(Q,{spaced:""}),(0,t._)("div",r,[(0,t.Wm)(L,{rows:e.docs,columns:e.columns,"row-key":"_id",dark:"","visible-columns":e.visibleColumns,style:{width:"100%"},filter:e.search,pagination:e.initialPagination,loading:e.loading,class:"card-dark",color:"amber"},{top:(0,t.w5)((()=>[(0,t.Wm)(z),(0,t.Wm)(V,{icon:"eva-refresh-outline",round:"",dense:"",style:{"margin-right":"6px"}}),(0,t.Wm)(H,{modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.search=a),dense:"",placeholder:"Search "+e.documentName+"..."},null,8,["modelValue","placeholder"]),(0,t.Wm)(E,{modelValue:e.visibleColumns,"onUpdate:modelValue":a[1]||(a[1]=a=>e.visibleColumns=a),multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"]),(0,t.Wm)(V,{dense:"",round:"",icon:"eva-cloud-download-outline",onClick:e.exportExcel,color:"blue",class:"q-ma-sm",push:""},null,8,["onClick"])])),header:(0,t.w5)((e=>[(0,t.Wm)(N,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{"auto-width":""}),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.cols,(a=>((0,t.wg)(),(0,t.j4)(j,{key:a.name,props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,t.w5)((a=>[(0,t.Wm)(N,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(M,{"auto-width":""},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{size:"md",color:"accent",round:"",dense:"",onClick:e=>a.expand=!a.expand,icon:a.expand?"remove":"eva-eye-outline"},null,8,["onClick","icon"])])),_:2},1024),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.cols,(e=>((0,t.wg)(),(0,t.j4)(M,{key:e.name,props:a},{default:(0,t.w5)((()=>["avatar"===e.name?((0,t.wg)(),(0,t.j4)(O,{key:0},{default:(0,t.w5)((()=>[(0,t._)("img",{src:e.value},null,8,n)])),_:2},1024)):((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[(0,t.Uk)((0,o.zw)(e.value),1)],64))])),_:2},1032,["props"])))),128)),(0,t.Wm)(M,{"auto-width":""},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{size:"sm",class:"text-red",round:"",dense:"",onClick:l=>e.deleteDocument(a.row),icon:"eva-trash-2-outline"},null,8,["onClick"]),(0,t.Wm)(V,{size:"sm",round:"",dense:"",onClick:l=>e.editDocument(a.row),icon:"eva-edit-outline"},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"]),(0,t.wy)((0,t.Wm)(N,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(M,{colspan:"100%"},{default:(0,t.w5)((()=>[(0,t._)("div",u,[(0,t.Wm)(I,{dense:"",style:{"max-width":"440px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(B,{dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[m])),_:1}),(0,t.Wm)(F,{side:""},{default:(0,t.w5)((()=>[(0,t._)("b",c,(0,o.zw)(a.row.profile.name),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(B,{dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[w])),_:1}),(0,t.Wm)(F,{side:""},{default:(0,t.w5)((()=>[(0,t._)("b",p,(0,o.zw)(a.row.email),1)])),_:2},1024),(0,t.Wm)(F,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{icon:"fas fa-copy",onClick:l=>e.coppyEmail(a.row.email),push:"",dense:"",round:"",class:"text-white"},null,8,["onClick"])])),_:2},1024)])),_:2},1024),(0,t.Wm)(B,{dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[f])),_:1}),(0,t.Wm)(F,{side:""},{default:(0,t.w5)((()=>[(0,t._)("b",b,(0,o.zw)(a.row.addressRTM),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(B,{dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[h])),_:1}),(0,t.Wm)(F,{side:""},{default:(0,t.w5)((()=>[(0,t._)("b",_,(0,o.zw)(a.row.balance)+" RTM",1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(B,{dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[g])),_:1}),(0,t.Wm)(F,{side:""},{default:(0,t.w5)((()=>[(0,t._)("b",y,(0,o.zw)(a.row.collateral)+" RTM",1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(B,{dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[W])),_:1}),(0,t.Wm)(F,{side:""},{default:(0,t.w5)((()=>[(0,t._)("b",v,(0,o.zw)(a.row.portfolio)+" RTM",1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(B,{dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[k])),_:1}),(0,t.Wm)(F,{side:""},{default:(0,t.w5)((()=>[(0,t._)("b",q,(0,o.zw)(a.row.discord),1)])),_:2},1024)])),_:2},1024),a.row.discord&&""!==a.row.discord?((0,t.wg)(),(0,t.j4)(B,{key:0,dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[U])),_:1}),(0,t.Wm)(F,{side:""},{default:(0,t.w5)((()=>[(0,t._)("b",C,(0,o.zw)(a.row.discord),1)])),_:2},1024)])),_:2},1024)):(0,t.kq)("",!0),(0,t.Wm)(B,{dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[x])),_:1}),(0,t.Wm)(F,{side:""},{default:(0,t.w5)((()=>[(0,t._)("b",D,(0,o.zw)(a.row.profile.discordName),1)])),_:2},1024)])),_:2},1024),a.row.profile.discordAvatar&&""!==a.row.profile.discordAvatar?((0,t.wg)(),(0,t.j4)(B,{key:1,dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[R])),_:1}),(0,t.Wm)(F,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(O,null,{default:(0,t.w5)((()=>[(0,t._)("img",{src:a.row.profile.discordAvatar},null,8,Z)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,t.kq)("",!0),(0,t.Wm)(B,{dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Wm)(V,{label:a.row.status?"block":"un block",size:"12px",color:"red",dense:"",icon:"block",onClick:l=>e.blockUser(a.row,{status:!a.row.status})},null,8,["label","onClick"])])),_:2},1024),(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Wm)(V,{label:"clear 2fa",color:"red",size:"12px",dense:"",icon:"layers_clear",onClick:l=>e.blockUser(a.row,{enableTfa:!1})},null,8,["onClick"])])),_:2},1024),(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Wm)(V,{label:"clear discord",disable:!a.row.discord||""===a.row.discord,size:"12px",color:"blue",dense:"",icon:"remove",onClick:l=>e.blockUser(a.row,{discord:""})},null,8,["disable","onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,t._)("div",$,[(0,t.Wm)(V,{label:"show Reward History",icon:"storage",onClick:l=>e.showRewardHistorys(a.row)},null,8,["onClick"])])])])),_:2},1024)])),_:2},1032,["props"]),[[s.F8,a.expand]])])),_:1},8,["rows","columns","visible-columns","filter","pagination","loading"])])]),(0,t.Wm)(ee,{modelValue:e.dialog,"onUpdate:modelValue":a[3]||(a[3]=a=>e.dialog=a),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(X,{style:{"min-width":"60vw"}},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,null,{default:(0,t.w5)((()=>[(0,t._)("div",null,(0,o.zw)(e.isEdit?"Edit ":"Create new")+" "+(0,o.zw)(e.documentName),1),(0,t.Wm)(z)])),_:1}),(0,t.Wm)(J,{onSubmit:e.onSubmit},{default:(0,t.w5)((()=>[(0,t.Wm)(K,{style:{overflow:"hidden","min-width":"320px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{class:"q-pa-sm",modelValue:e.doc.label,"onUpdate:modelValue":a[2]||(a[2]=a=>e.doc.label=a),label:"Label",rules:[e=>""!==e||"Label required"]},null,8,["modelValue","rules"])])),_:1}),(0,t.Wm)(G,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(V,{flat:"",label:"CLOSE",color:"red"},null,512),[[oe]]),(0,t.Wm)(V,{flat:"",label:e.isEdit?"Update":"Create",color:"primary",type:"submit"},null,8,["label"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(ee,{modelValue:e.dialogUpdate,"onUpdate:modelValue":a[6]||(a[6]=a=>e.dialogUpdate=a),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(X,{style:{"min-width":"40vw"}},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,null,{default:(0,t.w5)((()=>[(0,t._)("div",null,"Update "+(0,o.zw)(e.currentUser.profile?e.currentUser.profile.name:""),1),(0,t.Wm)(z)])),_:1}),(0,t.Wm)(J,{onSubmit:e.updateUser},{default:(0,t.w5)((()=>[(0,t.Wm)(K,{style:{overflow:"hidden","min-width":"320px"}},{default:(0,t.w5)((()=>[e.me.enableTfa?((0,t.wg)(),(0,t.j4)(H,{key:0,class:"q-pa-sm",modelValue:e.tfa,"onUpdate:modelValue":a[5]||(a[5]=a=>e.tfa=a),type:e.isPwd?"password":"text",label:"2FA",rules:[a=>""!==a||!e.me.enableTfa||"Please input 2FA"]},{append:(0,t.w5)((()=>[(0,t.Wm)(ae,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[4]||(a[4]=a=>e.isPwd=!e.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules"])):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(G,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(V,{flat:"",label:"CLOSE",color:"red"},null,512),[[oe]]),(0,t.Wm)(V,{flat:"",label:"Ok",color:"primary",type:"submit"})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(ee,{modelValue:e.dialogRewardHistory,"onUpdate:modelValue":a[7]||(a[7]=a=>e.dialogRewardHistory=a),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(X,{style:{"min-width":"60vw"}},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,null,{default:(0,t.w5)((()=>[A,(0,t.Wm)(z)])),_:1}),(0,t.Wm)(K,{style:{overflow:"hidden","min-width":"320px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(le,{isAdmin:!0,rewarded:e.rewardedUser,"reward-historys":e.rewardHistorys,"more-visible-columns":[]},null,8,["rewarded","reward-historys"])])),_:1}),(0,t.Wm)(G,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(V,{flat:"",label:"CLOSE",color:"red"},null,512),[[oe]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var S=l(93643),T=l(88603),Q=l(14250),z=l(85777),V=l(41914),H=l(64434),E=l(49968);const j=E.Ps`
  mutation updateUser($_id:String!, $status: Boolean,$enableTfa: Boolean,$discord:String,$tfa:String){
    updateUser(_id:$_id,status: $status,enableTfa:$enableTfa,discord: $discord,tfa:$tfa){
      _id
      email
      discord
      createdAt
      updatedAt
    }
  }
`,N=E.Ps`
  mutation createFaq($answer: String!,$label:String!){
    createFaq(answer:$answer,label: $label){
      _id
      answer
      label
      createdAt
      updatedAt
    }
  }
`,M=E.Ps`
  mutation deleteFaq($_id: String!){
    deleteFaq(_id:$_id){
      _id
    }
  }
`,O=E.Ps`
  query {
    users{
      _id
      enableTfa
      profile{
        name
        picture
        discordName
        discordAvatar
      }
      balance
      collateral
      portfolio
      email
      username
      addressRTM
      rules
      status
      discord
      createdAt
      updatedAt
    }

  }
`;var F,B=l(48815),I=l(94756),L=l(55181),Y=l(1919),K=function(e,a,l,t){var o,s=arguments.length,i=s<3?a:null===t?t=Object.getOwnPropertyDescriptor(a,l):t;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,a,l,t);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(i=(s<3?o(i):s>3?o(a,l,i):o(a,l))||i);return s>3&&i&&Object.defineProperty(a,l,i),i},G=function(e,a){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,a)};let J=class extends z.w3{me;formatPrice=Q.T;documentName="User";dialog=!1;isEdit=!1;loading=!1;search="";tfa="";isPwd=!0;dialogUpdate=!1;dialogRewardHistory=!1;rewardedUser=0;rewardHistorys=[];variable={status:!0};doc={name:"",email:"",addressRTM:""};currentUser={name:"",email:"",addressRTM:""};docs=[];initialPagination={sortBy:"updatedAt",descending:!0,page:1,rowsPerPage:10};visibleColumns=["email","discord","balance","collateral","portfolio","updatedAt"];columns=[{name:"avatar",required:!0,label:"Avatar",align:"left",field:e=>e.profile?e.profile.picture:"",sortable:!0},{name:"name",required:!0,label:"Name",align:"left",field:e=>e.profile?e.profile.name:"",sortable:!0},{name:"email",required:!0,label:"Email",align:"left",field:"email",sortable:!0},{name:"status",label:"Status",align:"left",field:"status",sortable:!0},{name:"discord",label:"Discord Id",align:"left",field:"discord",sortable:!0},{name:"Balance",label:"balance",align:"left",required:!0,field:"balance",sortable:!0},{name:"collateral",label:"Collateral",align:"left",field:"collateral",sortable:!0},{name:"portfolio",label:"Portfolio",align:"left",field:"portfolio",sortable:!0},{name:"Private wallet",label:"private wallet",align:"left",field:"addressRTM",sortable:!0},{name:"name",label:"name",align:"left",field:"profile.name",sortable:!0},{name:"enableTfa",label:"enableTfa",align:"left",field:"enableTfa",sortable:!0},{name:"createdAt",label:"createdAt",align:"center",field:"createdAt",sortable:!0},{name:"updatedAt",label:"updatedAt",align:"center",field:"updatedAt",sortable:!0}];onReset(){this.doc.name="",this.doc.email="",delete this.doc._id}async onSubmit(){this.isEdit?await this.updateDocument():await this.createDocument()}async getDocuments(){this.loading=!0;const e=await this.$apollo.query({query:O});this.docs=e.data.users,this.loading=!1}deleteDocument(e){console.log("haha"),this.$q.dialog({title:"Delete",message:"You may want to delete?",cancel:!0,persistent:!0}).onOk((()=>{this.$apollo.mutate({mutation:M,variables:{_id:e._id}}).then((()=>{this.getDocuments().then()}))}))}editDocument(e){this.isEdit=!0,this.dialog=!0,this.doc=(0,T.clone)(e)}async updateDocument(){const e=await this.$apollo.mutate({mutation:j,variables:this.doc});e&&e.data?(this.dialog=!1,this.$q.notify({message:"Update Done"}),this.onReset(),this.isEdit=!1,await this.getDocuments()):this.$q.notify({message:"Create error:",color:"red"})}async createDocument(){const e=await this.$apollo.mutate({mutation:N,variables:this.doc});e&&e.data?(this.dialog=!1,this.$q.notify({message:"Create Done"}),this.onReset(),await this.getDocuments()):this.$q.notify({message:"Create error:",color:"red"})}async getDataRewardHistorys(e){const a=await this.$apollo.query({query:Y.a,variables:{user:e._id}});if(a&&a.data){let e=0;this.rewardHistorys=a.data?.rewardHistorys?a.data?.rewardHistorys:[],this.rewardHistorys.forEach((a=>{e+=a.amount||0})),this.rewardedUser=e}}async showRewardHistorys(e){this.currentUser=e,this.dialogRewardHistory=!0,await this.getDataRewardHistorys(e)}blockUser(e,a){this.currentUser=e,this.dialogUpdate=!0,this.variable=a}async updateUser(){console.log(this.variable);let e=await this.$apollo.mutate({mutation:j,variables:{...this.variable,_id:this.currentUser._id,tfa:this.tfa}}).catch((e=>{const a=`Error!${e.toString()}`;H.Z.create({message:a,position:"bottom"})}));e&&(H.Z.create({message:"Update Done!",position:"bottom"}),await this.getDocuments(),this.tfa="",this.dialogUpdate=!1)}coppyEmail(e){(0,V.Z)(e).then((()=>{console.log("đầ"),H.Z.create({message:"Coppy Done!",position:"center"})})).catch((()=>{console.log("")}))}exportExcel(){(0,B.WD)(this.docs,"Users")}async created(){await this.getDocuments()}};K([(0,L.ZM)((e=>e.user.me)),G("design:type","function"===typeof(F="undefined"!==typeof I.e&&I.e)?F:Object)],J.prototype,"me",void 0),J=K([(0,z.Ei)({name:"UserIndex",components:{rewardHistory:S.Z}})],J);const X=J;var ee=l(74260),ae=l(24379),le=l(65869),te=l(30673),oe=l(2165),se=l(62025),ie=l(64689),de=l(63314),re=l(18186),ne=l(92414),ue=l(83884),me=l(75096),ce=l(27011),we=l(83414),pe=l(52035),fe=l(46778),be=l(10151),he=l(10846),_e=l(68689),ge=l(25589),ye=l(99367),We=l(24554),ve=l(60677),ke=l(7518),qe=l.n(ke);const Ue=(0,ee.Z)(X,[["render",P]]),Ce=Ue;qe()(X,"components",{QPage:ae.Z,QSeparator:le.Z,QTable:te.Z,QBtn:oe.Z,QSpace:se.Z,QInput:ie.Z,QSelect:de.Z,QTr:re.Z,QTh:ne.Z,QTd:ue.Z,QAvatar:me.Z,QList:ce.Z,QItem:we.Z,QItemSection:pe.Z,QDialog:fe.Z,QCard:be.Z,QBar:he.Z,QForm:_e.Z,QCardSection:ge.Z,QCardActions:ye.Z,QIcon:We.Z}),qe()(X,"directives",{ClosePopup:ve.Z})}}]);