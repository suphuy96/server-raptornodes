"use strict";(self["webpackChunkRaptorNodes"]=self["webpackChunkRaptorNodes"]||[]).push([[175],{41175:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ne});var l=a(83673),d=a(62323),o=a(98880);const i={style:{"max-width":"1024px",margin:"0 auto"}},s=(0,l._)("div",{class:"text-h5 text-amber col-12 q-pa-sm"},"Weekly Fund ",-1),r=(0,l.Uk)("Pending Withdrawl"),n=(0,l.Uk)("paid Withdrawl"),u={class:"text-h5 text-amber col-12 q-pa-sm"},m=(0,l._)("div",null,null,-1),w={style:{}},c=["src"],p={class:"q-pa-sm"},f=(0,l.Uk)(" Name "),h={class:"text-amber"},y=(0,l.Uk)(" address "),W={class:"text-amber"},b=(0,l.Uk)(" amount "),g={class:"text-amber"},_=(0,l.Uk)(" txid "),k={class:"text-amber"},v=(0,l.Uk)(" Collateral Old "),q={class:"text-amber"},x=(0,l.Uk)(" Smart Node "),Z={class:"text-amber"},U=(0,l.Uk)(" Created At "),C={class:"text-amber"},P=(0,l.Uk)(" Discord ID "),S={class:"text-amber"},N=(0,l.Uk)(" discord Name "),I={class:"text-amber"},R=(0,l.Uk)(" discord Avatar "),Q=["src"],D=(0,l._)("div",null,"Reward History",-1);function z(e,t,a,z,j,A){const H=(0,l.up)("q-separator"),T=(0,l.up)("q-item-label"),V=(0,l.up)("q-item-section"),E=(0,l.up)("q-badge"),O=(0,l.up)("q-btn"),M=(0,l.up)("q-item"),$=(0,l.up)("q-space"),F=(0,l.up)("q-input"),B=(0,l.up)("q-select"),L=(0,l.up)("q-th"),Y=(0,l.up)("q-tr"),K=(0,l.up)("q-td"),G=(0,l.up)("q-avatar"),J=(0,l.up)("q-list"),X=(0,l.up)("q-table"),ee=(0,l.up)("q-bar"),te=(0,l.up)("reward-history"),ae=(0,l.up)("q-card-section"),le=(0,l.up)("q-card-actions"),de=(0,l.up)("q-card"),oe=(0,l.up)("q-dialog"),ie=(0,l.up)("q-icon"),se=(0,l.up)("q-form"),re=(0,l.up)("q-page"),ne=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(re,{class:"row items-center justify-evenly q-pa-lg",style:{display:"block"}},{default:(0,l.w5)((()=>[(0,l._)("div",i,[s,(0,l.Wm)(H,{spaced:""}),(0,l.Wm)(M,{dense:"",class:"bg-striped"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,null,{default:(0,l.w5)((()=>[r])),_:1})])),_:1}),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{caption:""},{default:(0,l.w5)((()=>[(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(e.withdrawlWeeklyInfo.withdrawlIsPending)+"RTM ",1),(0,l.Wm)(E,{color:"red",floating:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(e.withdrawlWeeklyInfo.withdrawlIsPendingCount),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(H),(0,l.Wm)(M,{dense:"",class:"bg-striped"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,null,{default:(0,l.w5)((()=>[n])),_:1})])),_:1}),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{caption:""},{default:(0,l.w5)((()=>[(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(e.withdrawlWeeklyInfo.withdrawlISPaid)+" RTM ",1),(0,l.Wm)(E,{color:"red",floating:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(e.withdrawlWeeklyInfo.withdrawlISPaidCount),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(H),(0,l._)("div",u,(0,d.zw)(e.documentName),1),m,(0,l.Wm)(H,{spaced:""}),(0,l._)("div",w,[(0,l.Wm)(X,{rows:e.docs,columns:e.columns,"row-key":"_id",dark:"",pagination:e.initialPagination,"visible-columns":e.visibleColumns,style:{width:"100%"},filter:e.search,loading:e.loading,class:"card-dark",color:"amber"},{top:(0,l.w5)((()=>[(0,l.Wm)($),(0,l.Wm)(O,{icon:"eva-refresh-outline",onClick:e.getDocuments,push:"",round:"",dense:"",style:{"margin-right":"6px"}},null,8,["onClick"]),(0,l.Wm)(F,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=t=>e.search=t),dense:"",placeholder:"Search "+e.documentName+"..."},null,8,["modelValue","placeholder"]),(0,l.Wm)(B,{modelValue:e.visibleColumns,"onUpdate:modelValue":t[1]||(t[1]=t=>e.visibleColumns=t),multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])])),header:(0,l.w5)((e=>[(0,l.Wm)(Y,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(L,{"auto-width":""}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.cols,(t=>((0,l.wg)(),(0,l.j4)(L,{key:t.name,props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(t.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,l.w5)((t=>[(0,l.Wm)(Y,{props:t},{default:(0,l.w5)((()=>[(0,l.Wm)(K,{"auto-width":""},{default:(0,l.w5)((()=>[(0,l.Wm)(O,{size:"sm",disable:!t.row.txid||""===t.row.txid,round:"",dense:"",onClick:a=>e.showTransition(t.row.txid),icon:"eva-external-link-outline"},null,8,["disable","onClick"]),(0,l.Wm)(O,{size:"md",color:"accent",round:"",dense:"",onClick:e=>t.expand=!t.expand,icon:t.expand?"remove":"eva-eye-outline"},null,8,["onClick","icon"])])),_:2},1024),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.cols,(e=>((0,l.wg)(),(0,l.j4)(K,{key:e.name,props:t},{default:(0,l.w5)((()=>["avatar"===e.name?((0,l.wg)(),(0,l.j4)(G,{key:0},{default:(0,l.w5)((()=>[(0,l._)("img",{src:e.value},null,8,c)])),_:2},1024)):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Uk)((0,d.zw)(e.value),1)],64))])),_:2},1032,["props"])))),128)),(0,l.Wm)(K,{"auto-width":""},{default:(0,l.w5)((()=>[(0,l.Wm)(O,{size:"sm",round:"",dense:"",disable:"Pending"===t.row.status,onClick:a=>e.editDocument(t.row),color:"red",icon:"eva-trash-2-outline"},null,8,["disable","onClick"]),(0,l.Wm)(O,{size:"sm",round:"",dense:"",disable:!t.row.txid||""===t.row.txid,onClick:a=>e.showTransition(t.row.txid),icon:"eva-external-link-outline"},null,8,["disable","onClick"])])),_:2},1024)])),_:2},1032,["props"]),(0,l.wy)((0,l.Wm)(Y,{props:t},{default:(0,l.w5)((()=>[(0,l.Wm)(K,{colspan:"100%"},{default:(0,l.w5)((()=>[(0,l._)("div",p,[(0,l.Wm)(J,{dense:"",style:{"max-width":"640px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{dense:""},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[f])),_:1}),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>[(0,l._)("b",h,(0,d.zw)(t.row.author?t.row.author.profile.name:""),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(M,{dense:""},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[y])),_:1}),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>[(0,l._)("b",W,(0,d.zw)(t.row.address),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(M,{dense:""},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[b])),_:1}),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>[(0,l._)("b",g,(0,d.zw)(t.row.amount)+" RTM",1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(M,{dense:""},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[_])),_:1}),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>[(0,l._)("b",k,(0,d.zw)(t.row.txid),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(M,{dense:""},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[v])),_:1}),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>[(0,l._)("b",q,(0,d.zw)(t.row.collateralOld)+" RTM",1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(M,{dense:""},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[x])),_:1}),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>[(0,l._)("b",Z,(0,d.zw)(e.objSmartNode[t.row.smartNode]?e.objSmartNode[t.row.smartNode]:""),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(M,{dense:""},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[U])),_:1}),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>[(0,l._)("b",C,(0,d.zw)(t.row.createdAt),1)])),_:2},1024)])),_:2},1024),t.row.discord&&""!==t.row.discord?((0,l.wg)(),(0,l.j4)(M,{key:0,dense:""},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[P])),_:1}),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>[(0,l._)("b",S,(0,d.zw)(t.row.discord),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),t.row.discord&&""!==t.row.discord?((0,l.wg)(),(0,l.j4)(M,{key:1,dense:""},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[N])),_:1}),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>[(0,l._)("b",I,(0,d.zw)(t.row.author.profile.discordName),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),t.row.author.profile.discordAvatar&&""!==t.row.author.profile.discordAvatar?((0,l.wg)(),(0,l.j4)(M,{key:2,dense:""},{default:(0,l.w5)((()=>[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[R])),_:1}),(0,l.Wm)(V,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(G,null,{default:(0,l.w5)((()=>[(0,l._)("img",{src:t.row.author.profile.discordAvatar},null,8,Q)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),(0,l.Wm)(M,{dense:""},{default:(0,l.w5)((()=>[(0,l.Wm)(V)])),_:1})])),_:2},1024)])])),_:2},1024)])),_:2},1032,["props"]),[[o.F8,t.expand]])])),_:1},8,["rows","columns","pagination","visible-columns","filter","loading"])])]),(0,l.Wm)(oe,{modelValue:e.dialogRewardHistory,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dialogRewardHistory=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(de,{style:{"min-width":"76vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(ee,null,{default:(0,l.w5)((()=>[D,(0,l.Wm)($)])),_:1}),(0,l.Wm)(ae,{style:{overflow:"hidden","min-width":"320px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(te,{"more-visible-columns":["avatar","name","email"],"is-admin":!0,rewarded:e.rewardedUser,"reward-historys":e.rewardHistorys},null,8,["rewarded","reward-historys"])])),_:1}),(0,l.Wm)(le,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(O,{flat:"",label:"CLOSE",color:"red"},null,512),[[ne]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(oe,{modelValue:e.dialog,"onUpdate:modelValue":t[5]||(t[5]=t=>e.dialog=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(de,{style:{"min-width":"30vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(ee,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,"Delete Request "+(0,d.zw)(e.documentName),1),(0,l.Wm)($)])),_:1}),(0,l.Wm)(se,{onSubmit:e.onSubmit},{default:(0,l.w5)((()=>[(0,l.Wm)(ae,{style:{overflow:"hidden","min-width":"320px"}},{default:(0,l.w5)((()=>[(0,l._)("p",null," amount: "+(0,d.zw)(e.currentWithdrawlWeekly.amount),1),e.me.enableTfa?((0,l.wg)(),(0,l.j4)(F,{key:0,class:"q-pa-sm",modelValue:e.tfa,"onUpdate:modelValue":t[4]||(t[4]=t=>e.tfa=t),type:e.isPwd?"password":"text",label:"2FA",rules:[t=>""!==t||!e.me.enableTfa||"Please input 2FA"]},{append:(0,l.w5)((()=>[(0,l.Wm)(ie,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[3]||(t[3]=t=>e.isPwd=!e.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules"])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(le,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(O,{flat:"",label:"CLOSE",color:"red"},null,512),[[ne]]),(0,l.Wm)(O,{flat:"",label:"Update",color:"primary",type:"submit"})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])])),_:1})}var j,A,H,T=a(88603),V=a(85777),E=a(64434),O=a(74633),M=a(55181),$=a(61621),F=a(94756),B=a(1949),L=a(93643),Y=a(14250),K=a(90149),G=a(1919),J=a(49968),X=function(e,t,a,l){var d,o=arguments.length,i=o<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,a):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,l);else for(var s=e.length-1;s>=0;s--)(d=e[s])&&(i=(o<3?d(i):o>3?d(t,a,i):d(t,a))||i);return o>3&&i&&Object.defineProperty(t,a,i),i},ee=function(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)};let te=class extends V.w3{variableSystem;showAddress;showTransition;me;currentPrice;currency;formatPrice=Y.T;formatMoney=Y.l;documentName="Withdrawl Weekly";dialog=!1;dialogRewardHistory=!1;dialogWithdrawl=!1;isEdit=!1;loading=!1;search="";amount=0;address="";tfa="";isPwd=!0;withdrawlWeeklyInfo={withdrawlIsPending:0,withdrawlISPaid:0,withdrawlISPaidCount:0,withdrawlIsPendingCount:0};currentWithdrawlWeekly={_id:"",address:"",smartNode:"",status:"Pending",amount:0};optionsStatus=[{label:"Not Enough",value:"Not Enough"},{label:"Enough",value:"Enough"},{label:"Start Reward",value:"Start Reward"},{label:"Stopped",value:"Stopped"}];doc={address:"",smartNode:"",status:"Pending",amount:0};docs=[];objSmartNode={};rewardHistorys=[];rewardedUser=0;initialPagination={sortBy:"createdAt",descending:!0,page:1,rowsPerPage:100};visibleColumns=["amount","name","status","confirm","createdAt"];columns=[{name:"address",required:!1,label:"address",align:"left",field:"address",sortable:!0},{name:"amount",required:!0,label:"amount",align:"left",field:"amount",sortable:!0},{name:"status",label:"status",align:"left",field:"status",sortable:!0},{name:"confirm",label:"confirm",align:"left",field:"confirm",sortable:!0},{name:"collateralOld",label:"collateralOld",align:"left",field:"collateralOld",sortable:!0},{name:"txid",label:"txid",align:"center",field:"txid",sortable:!0},{name:"createdAt",label:"createdAt",align:"center",field:"createdAt",sortable:!0},{name:"updatedAt",label:"updatedAt",align:"center",field:"updatedAt",sortable:!0}];onReset(){this.doc.address="",this.doc.amount=0,this.doc.status="Pending",this.doc.smartNode="",delete this.doc._id}async onSubmit(){this.isEdit&&await this.updateDocument()}async getDocuments(){this.loading=!0;const e=await this.$apollo.query({query:O.o3});this.docs=e.data.withdrawWeeklys;const t=await this.$apollo.query({query:J.Ps`query{ smartNodes{_id label} }`});t.data.smartNodes&&t.data.smartNodes.forEach((e=>{this.objSmartNode[e._id]=e.label})),this.loading=!1}deleteDocument(e){console.log("haha"),this.$q.dialog({title:"Delete",message:"You may want to delete?",cancel:!0,persistent:!0}).onOk((()=>{}))}editDocument(e){this.isEdit=!0,this.dialog=!0,this.currentWithdrawlWeekly=e,this.doc=(0,T.clone)(e)}async updateDocument(){const e=await this.$apollo.mutate({mutation:O.Vx,variables:{_id:this.currentWithdrawlWeekly._id,status:"Cancel"}});e&&e.data&&e.data.updateWithdrawWeekly?(this.dialog=!1,this.$q.notify({message:"Update Done"}),this.onReset(),this.isEdit=!1,this.tfa="",await this.getDocuments(),await this.getWithdrawlWeeklyInfo()):this.$q.notify({message:"Create error:",color:"red"})}createDocument(){}async getDataRewardHistorys(){const e=await this.$apollo.query({query:G.a,variables:{smartNode:this.currentWithdrawlWeekly._id}});if(e&&e.data){let t=0;this.rewardHistorys=e.data?.rewardHistorys?e.data?.rewardHistorys:[],this.rewardHistorys.forEach((e=>{t+=e.amount||0})),this.rewardedUser=t}}async showRewardHistorys(){this.dialogRewardHistory=!0,await this.getDataRewardHistorys()}withdrawEnoughSmartNode(){this.dialogWithdrawl=!1,E.Z.create({message:"withdraw Enough SmartNode Done!",position:"center"}),this.tfa=""}async getWithdrawlWeeklyInfo(){this.loading=!0;const e=await this.$apollo.query({query:K.xj});e.data.withdrawlWeeklyInfoUser&&(this.withdrawlWeeklyInfo=e.data.withdrawlWeeklyInfoUser),this.loading=!1}async created(){await this.getWithdrawlWeeklyInfo(),await this.getDocuments()}};X([(0,M.ZM)((e=>e.balance.variableSystem)),ee("design:type","function"===typeof(j="undefined"!==typeof $.W&&$.W)?j:Object)],te.prototype,"variableSystem",void 0),X([(0,M.aU)("balance/showAddress"),ee("design:type",void 0)],te.prototype,"showAddress",void 0),X([(0,M.aU)("balance/showTransition"),ee("design:type",void 0)],te.prototype,"showTransition",void 0),X([(0,M.ZM)((e=>e.user.me)),ee("design:type","function"===typeof(A="undefined"!==typeof F.e&&F.e)?A:Object)],te.prototype,"me",void 0),X([(0,M.ZM)((e=>e.balance.market?e.balance.market.current_price:1)),ee("design:type",Number)],te.prototype,"currentPrice",void 0),X([(0,M.ZM)((e=>e.balance.currency)),ee("design:type","function"===typeof(H="undefined"!==typeof B.Z&&B.Z)?H:Object)],te.prototype,"currency",void 0),te=X([(0,V.Ei)({name:"NodeIndex",components:{rewardHistory:L.Z}})],te);const ae=te;var le=a(74260),de=a(24379),oe=a(65869),ie=a(83414),se=a(52035),re=a(2350),ne=a(2165),ue=a(69721),me=a(30673),we=a(62025),ce=a(64689),pe=a(63314),fe=a(18186),he=a(92414),ye=a(83884),We=a(75096),be=a(27011),ge=a(46778),_e=a(10151),ke=a(10846),ve=a(25589),qe=a(99367),xe=a(68689),Ze=a(24554),Ue=a(60677),Ce=a(7518),Pe=a.n(Ce);const Se=(0,le.Z)(ae,[["render",z]]),Ne=Se;Pe()(ae,"components",{QPage:de.Z,QSeparator:oe.Z,QItem:ie.Z,QItemSection:se.Z,QItemLabel:re.Z,QBtn:ne.Z,QBadge:ue.Z,QTable:me.Z,QSpace:we.Z,QInput:ce.Z,QSelect:pe.Z,QTr:fe.Z,QTh:he.Z,QTd:ye.Z,QAvatar:We.Z,QList:be.Z,QDialog:ge.Z,QCard:_e.Z,QBar:ke.Z,QCardSection:ve.Z,QCardActions:qe.Z,QForm:xe.Z,QIcon:Ze.Z}),Pe()(ae,"directives",{ClosePopup:Ue.Z})}}]);