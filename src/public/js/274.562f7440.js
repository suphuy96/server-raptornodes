"use strict";(self["webpackChunkRaptorNodes"]=self["webpackChunkRaptorNodes"]||[]).push([[274],{3274:(e,l,a)=>{a.r(l),a.d(l,{default:()=>B});var t=a(3673),o=a(2323),s=a(8880);const i={style:{"max-width":"1024px",margin:"0 auto"}},d={class:"text-h5 text-amber col-12 q-pa-sm"},n={style:{}},r={class:"q-pa-sm"},u={class:"text-amber"},c=(0,t._)("p",null,"participants",-1),m=["src"];function p(e,l,a,p,w,f){const b=(0,t.up)("q-separator"),h=(0,t.up)("q-btn"),g=(0,t.up)("q-space"),y=(0,t.up)("q-input"),_=(0,t.up)("q-select"),W=(0,t.up)("q-th"),q=(0,t.up)("q-tr"),v=(0,t.up)("q-td"),k=(0,t.up)("q-item-section"),C=(0,t.up)("q-item"),D=(0,t.up)("q-list"),Z=(0,t.up)("q-avatar"),Q=(0,t.up)("q-item-label"),A=(0,t.up)("q-table"),x=(0,t.up)("q-bar"),U=(0,t.up)("q-card-section"),V=(0,t.up)("q-card-actions"),z=(0,t.up)("q-form"),I=(0,t.up)("q-card"),N=(0,t.up)("q-dialog"),R=(0,t.up)("q-page"),S=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(R,{class:"row items-center justify-evenly q-pa-lg",style:{display:"block"}},{default:(0,t.w5)((()=>[(0,t._)("div",i,[(0,t._)("div",d,(0,o.zw)(e.documentName),1),(0,t.Wm)(b,{spaced:""}),(0,t._)("div",n,[(0,t.Wm)(A,{rows:e.docs,columns:e.columns,"row-key":"ipAddress",dark:"",pagination:e.initialPagination,"visible-columns":e.visibleColumns,style:{width:"100%"},filter:e.search,loading:e.loading,class:"card-dark",color:"amber"},{top:(0,t.w5)((()=>[(0,t.Wm)(h,{label:"Create new "+e.documentName,icon:"eva-cloud-download-outline",onClick:l[0]||(l[0]=l=>{e.dialog=!0,e.isEdit=!1}),push:""},null,8,["label"]),(0,t.Wm)(g),(0,t.Wm)(h,{icon:"eva-refresh-outline",onClick:e.getDocuments,push:"",round:"",dense:"",style:{"margin-right":"6px"}},null,8,["onClick"]),(0,t.Wm)(y,{modelValue:e.search,"onUpdate:modelValue":l[1]||(l[1]=l=>e.search=l),dense:"",placeholder:"Search "+e.documentName+"..."},null,8,["modelValue","placeholder"]),(0,t.Wm)(_,{modelValue:e.visibleColumns,"onUpdate:modelValue":l[2]||(l[2]=l=>e.visibleColumns=l),multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])])),header:(0,t.w5)((e=>[(0,t.Wm)(q,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{"auto-width":""}),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.cols,(l=>((0,t.wg)(),(0,t.j4)(W,{key:l.name,props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,t.w5)((l=>[(0,t.Wm)(q,{props:l},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{"auto-width":""},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{size:"sm",color:"accent",round:"",dense:"",onClick:e=>l.expand=!l.expand,icon:l.expand?"remove":"eva-eye-outline"},null,8,["onClick","icon"])])),_:2},1024),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.cols,(e=>((0,t.wg)(),(0,t.j4)(v,{key:e.name,props:l},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.value),1)])),_:2},1032,["props"])))),128)),(0,t.Wm)(v,{"auto-width":""},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{size:"sm",class:"text-red",round:"",dense:"",onClick:a=>e.deleteDocument(l.row),icon:"eva-trash-2-outline"},null,8,["onClick"]),(0,t.Wm)(h,{size:"sm",round:"",dense:"",onClick:a=>e.editDocument(l.row),icon:"eva-edit-outline"},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"]),(0,t.wy)((0,t.Wm)(q,{props:l},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{colspan:"100%"},{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t.Wm)(D,{dense:"",style:{"max-width":"420px"}},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.columns,(e=>((0,t.wg)(),(0,t.j4)(C,{dense:"",key:e.name},{default:(0,t.w5)((()=>[(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.label),1)])),_:2},1024),(0,t.Wm)(k,{side:""},{default:(0,t.w5)((()=>[(0,t._)("b",u,(0,o.zw)(l.row[e.field]),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024),c,(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.row.participants,(e=>((0,t.wg)(),(0,t.j4)(C,{key:e.userId},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,null,{default:(0,t.w5)((()=>[(0,t._)("img",{src:e.userId.profile?e.userId.profile.picture:""},null,8,m)])),_:2},1024)])),_:2},1024),(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Name "+(0,o.zw)(e.userId.profile?e.userId.profile.name:""),1)])),_:2},1024),(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" Discord "+(0,o.zw)(e.userId.profile?e.userId.discord:""),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" collateral "+(0,o.zw)(e.collateral),1)])),_:2},1024),(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" percentOfNode "+(0,o.zw)(100*e.percentOfNode)+"% ",1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" RTMRewards "+(0,o.zw)(e.RTMRewards)+"% ",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])])),_:2},1024)])),_:2},1032,["props"]),[[s.F8,l.expand]])])),_:1},8,["rows","columns","pagination","visible-columns","filter","loading"])])]),(0,t.Wm)(N,{modelValue:e.dialog,"onUpdate:modelValue":l[5]||(l[5]=l=>e.dialog=l),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{style:{"min-width":"60vw"}},{default:(0,t.w5)((()=>[(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t._)("div",null,(0,o.zw)(e.isEdit?"Edit ":"Create new")+" "+(0,o.zw)(e.documentName),1),(0,t.Wm)(g)])),_:1}),(0,t.Wm)(z,{onSubmit:e.onSubmit},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{style:{overflow:"hidden","min-width":"320px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{class:"q-pa-sm",modelValue:e.doc.label,"onUpdate:modelValue":l[3]||(l[3]=l=>e.doc.label=l),label:"Label",rules:[e=>""!==e||"Label required"]},null,8,["modelValue","rules"]),(0,t.Wm)(y,{class:"q-pa-sm",modelValue:e.doc.ipAddress,"onUpdate:modelValue":l[4]||(l[4]=l=>e.doc.ipAddress=l),label:"Ip Address",rules:[e=>""!==e||"ipAddress required"]},null,8,["modelValue","rules"])])),_:1}),(0,t.Wm)(V,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(h,{flat:"",label:"CLOSE",color:"red"},null,512),[[S]]),(0,t.Wm)(h,{flat:"",label:e.isEdit?"Update":"Create",color:"primary",type:"submit"},null,8,["label"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])])),_:1})}var w=a(8603),f=a(4250),b=a(5777),h=a(4434),g=a(3567),y=function(e,l,a,t){var o,s=arguments.length,i=s<3?l:null===t?t=Object.getOwnPropertyDescriptor(l,a):t;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,l,a,t);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(i=(s<3?o(i):s>3?o(l,a,i):o(l,a))||i);return s>3&&i&&Object.defineProperty(l,a,i),i};let _=class extends b.w3{formatPrice=f.T;documentName="Node";dialog=!1;isEdit=!1;loading=!1;search="";doc={ipAddress:"",label:""};docs=[];initialPagination={sortBy:"label",descending:!1,page:1,rowsPerPage:10};visibleColumns=["label","ipAddress","lastpaidtime","lastpaidblock","updatedAt"];columns=[{name:"label",required:!0,label:"label",align:"left",field:"label",sortable:!0},{name:"ipAddress",required:!0,label:"ipAddress",align:"left",field:"ipAddress",sortable:!0},{name:"status",label:"status",align:"left",field:"status",sortable:!0},{name:"payee",required:!0,label:"payee",align:"left",field:"payee",sortable:!0},{name:"collateraladdress",label:"collateraladdress",align:"left",field:"collateraladdress",sortable:!0},{name:"owneraddress",label:"owneraddress",align:"left",field:"owneraddress",sortable:!0},{name:"lastpaidtime",label:"lastpaidtime",align:"left",field:"lastpaidtime",sortable:!0},{name:"lastpaidblock",label:"lastpaidblock",align:"left",field:"lastpaidblock",sortable:!0},{name:"createdAt",label:"createdAt",align:"center",field:"createdAt",sortable:!0},{name:"updatedAt",label:"updatedAt",align:"center",field:"updatedAt",sortable:!0}];onReset(){this.doc.ipAddress="",this.doc.label="",delete this.doc._id}async onSubmit(){this.isEdit?await this.updateDocument():await this.createDocument()}async getDocuments(){this.loading=!0;const e=await this.$apollo.query({query:g.o3});this.docs=e.data.smartNodes,this.loading=!1}deleteDocument(e){console.log("haha"),this.$q.dialog({title:"Delete",message:"You may want to delete?",cancel:!0,persistent:!0}).onOk((()=>{this.$apollo.mutate({mutation:g.Od,variables:{_id:this.doc._id}}).then((()=>{this.getDocuments().then()}))}))}editDocument(e){this.isEdit=!0,this.dialog=!0,this.doc=(0,w.clone)(e)}async updateDocument(){const e=await this.$apollo.mutate({mutation:g.Vx,variables:this.doc});e&&e.data?(this.dialog=!1,this.$q.notify({message:"Update Done"}),this.onReset(),this.isEdit=!1,await this.getDocuments()):this.$q.notify({message:"Create error:",color:"red"})}async createDocument(){const e=await this.$apollo.mutate({mutation:g.Ue,variables:this.doc});e&&e.data?(this.dialog=!1,this.$q.notify({message:"Create Done"}),this.onReset(),await this.getDocuments()):this.$q.notify({message:"Create error:",color:"red"})}sendContact(){h.Z.create({message:"Send contact Done!",position:"center"})}async created(){await this.getDocuments()}};_=y([(0,b.Ei)({name:"NodeIndex",components:{}})],_);const W=_;var q=a(4260),v=a(4379),k=a(5869),C=a(673),D=a(2165),Z=a(2025),Q=a(4689),A=a(3314),x=a(8186),U=a(2414),V=a(3884),z=a(7011),I=a(3414),N=a(2035),R=a(5096),S=a(2350),E=a(6778),$=a(151),j=a(846),P=a(5269),O=a(5589),T=a(9367),L=a(677),Y=a(7518),H=a.n(Y);const K=(0,q.Z)(W,[["render",p]]),B=K;H()(W,"components",{QPage:v.Z,QSeparator:k.Z,QTable:C.Z,QBtn:D.Z,QSpace:Z.Z,QInput:Q.Z,QSelect:A.Z,QTr:x.Z,QTh:U.Z,QTd:V.Z,QList:z.Z,QItem:I.Z,QItemSection:N.Z,QAvatar:R.Z,QItemLabel:S.Z,QDialog:E.Z,QCard:$.Z,QBar:j.Z,QForm:P.Z,QCardSection:O.Z,QCardActions:T.Z}),H()(W,"directives",{ClosePopup:L.Z})}}]);