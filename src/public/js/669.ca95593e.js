"use strict";(self["webpackChunkRaptorNodes"]=self["webpackChunkRaptorNodes"]||[]).push([[669],{4669:(e,a,t)=>{t.r(a),t.d(a,{default:()=>se});var s=t(3673),d=t(2323),l=t(8880);const r={style:{"max-width":"1024px",margin:"0 auto"}},o=(0,s._)("div",{class:"text-h5 text-amber col-12 q-pa-sm"},"Favourite Address ",-1),i={class:"q-pa-ms row"},n={class:"text-h5 text-amber row col-12 q-pa-sm"},c=(0,s.Uk)("Transaction "),u=(0,s.Uk)(),m=(0,s._)("p",{class:"text-h5 text-left"},"ALL Transaction",-1),p={class:""};function h(e,a,t,h,w,b){const f=(0,s.up)("q-separator"),g=(0,s.up)("q-icon"),y=(0,s.up)("q-input"),A=(0,s.up)("q-btn"),W=(0,s.up)("q-item"),v=(0,s.up)("q-space"),q=(0,s.up)("q-select"),_=(0,s.up)("q-th"),k=(0,s.up)("q-tr"),Z=(0,s.up)("q-td"),x=(0,s.up)("q-table"),C=(0,s.up)("q-bar"),U=(0,s.up)("q-card-section"),$=(0,s.up)("q-card-actions"),T=(0,s.up)("q-card"),V=(0,s.up)("q-dialog"),Q=(0,s.up)("q-page"),B=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(Q,{class:"row q-pa-lg col-12",style:{display:"block"}},{default:(0,s.w5)((()=>[(0,s._)("div",r,[o,(0,s.Wm)(f),(0,s._)("div",i,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.userAddresss,((a,t)=>((0,s.wg)(),(0,s.j4)(W,{key:t},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{dense:"",modelValue:a.address,"onUpdate:modelValue":e=>a.address=e,label:"Your Address RTM"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(g,{name:"fas fa-coins"})])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,s.Wm)(A,{label:"Update",disable:""==a.address,onClick:t=>e.UpdateUserAddress(a)},null,8,["disable","onClick"])])),_:2},1024)))),128)),e.userAddresss.length<5?((0,s.wg)(),(0,s.j4)(W,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{dense:"",modelValue:e.address,"onUpdate:modelValue":a[0]||(a[0]=a=>e.address=a),label:"Your Address RTM"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(g,{name:"fas fa-coins"})])),_:1},8,["modelValue"]),(0,s.Wm)(A,{label:"Add",disable:""==e.address,onClick:e.addUserAddress},null,8,["disable","onClick"])])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(W)]),(0,s._)("div",n,[c,(0,s.Wm)(A,{class:"text-white bg-blue q-ml-md",icon:"fas fa-sign-out-alt",label:"Withdraw",onClick:a[1]||(a[1]=a=>e.dialogWithdrawl=!0)}),(0,s.Wm)(v),u,(0,s.Wm)(A,{class:"text-white",icon:"eva-refresh-outline",push:"",onClick:e.getWithdraw},null,8,["onClick"])]),(0,s.Wm)(f),(0,s._)("div",null,[(0,s.Wm)(x,{rows:e.transactions,columns:e.columns,"row-key":"name","visible-columns":e.visibleColumns,dark:"",loading:e.loading,filter:e.searchText,class:"rol col-12",pagination:e.initialPagination,color:"amber"},{top:(0,s.w5)((()=>[m,(0,s.Wm)(v),(0,s.Wm)(y,{modelValue:e.searchText,"onUpdate:modelValue":a[2]||(a[2]=a=>e.searchText=a),dense:"",placeholder:"Search Transaction.."},null,8,["modelValue"]),(0,s.Wm)(q,{modelValue:e.visibleColumns,"onUpdate:modelValue":a[3]||(a[3]=a=>e.visibleColumns=a),multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])])),header:(0,s.w5)((e=>[(0,s.Wm)(k,{props:e},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{"auto-width":""}),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.cols,(a=>((0,s.wg)(),(0,s.j4)(_,{key:a.name,props:e},{default:(0,s.w5)((()=>[(0,s.Uk)((0,d.zw)(a.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,s.w5)((a=>[(0,s.Wm)(k,{props:a},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{"auto-width":""},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{size:"sm",round:"",dense:"",onClick:t=>e.showTransition(a.row),icon:"eva-external-link-outline"},null,8,["onClick"])])),_:2},1024),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.cols,(e=>((0,s.wg)(),(0,s.j4)(Z,{key:e.name,props:a},{default:(0,s.w5)((()=>[(0,s.Uk)((0,d.zw)(e.value),1)])),_:2},1032,["props"])))),128)),(0,s.Wm)(Z,{"auto-width":""},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{size:"sm",round:"",dense:"",onClick:t=>e.showTran(a.row),icon:"eva-external-link-outline"},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"]),(0,s.wy)((0,s.Wm)(k,{props:a},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{colspan:"100%"},{default:(0,s.w5)((()=>[(0,s._)("div",p,(0,d.zw)(a.row.answer),1)])),_:2},1024)])),_:2},1032,["props"]),[[l.F8,a.expand]])])),_:1},8,["rows","columns","visible-columns","loading","filter","pagination"])])]),(0,s.Wm)(V,{modelValue:e.dialogWithdrawl,"onUpdate:modelValue":a[9]||(a[9]=a=>e.dialogWithdrawl=a),style:{"min-width":"50vw"},persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(T,null,{default:(0,s.w5)((()=>[(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[(0,s._)("div",null,"Balance:"+(0,d.zw)(e.balance)+"RTM - "+(0,d.zw)(e.currency.charCode)+(0,d.zw)(e.currentPrice*e.balance)+" "+(0,d.zw)(e.currency.symbol),1),(0,s.Wm)(v)])),_:1}),(0,s.Wm)(U,{style:{overflow:"hidden","min-width":"320px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{class:"q-pa-sm",modelValue:e.addressWithdrawl,"onUpdate:modelValue":[a[4]||(a[4]=a=>e.addressWithdrawl=a),e.inputAddress],autofocus:"",label:"Your Address RTM",debounce:"500"},null,8,["modelValue","onUpdate:modelValue"]),(0,s.Wm)(q,{class:"q-pa-sm",dense:"",modelValue:e.addressWithdrawl,"onUpdate:modelValue":a[5]||(a[5]=a=>e.addressWithdrawl=a),options:e.userAddresss,"emit-value":"","option-label":"address","option-value":"address",label:"Favourite Address"},null,8,["modelValue","options"]),""!==e.doneAddress?((0,s.wg)(),(0,s.iD)("span",{key:0,class:(0,d.C_)(("Done"===e.doneAddress?"text-blue":"text-red")+"row col-12 q-pa-sm fixmg")},(0,d.zw)(e.doneAddress)+" current Balance:"+(0,d.zw)(e.balanceAddress),3)):(0,s.kq)("",!0),(0,s.Wm)(y,{type:"number",class:"q-pa-sm",modelValue:e.amount,"onUpdate:modelValue":a[7]||(a[7]=a=>e.amount=a),modelModifiers:{number:!0},label:"Amount",rules:[a=>a<=e.balance||"Please use maximum "+e.balance]},{append:(0,s.w5)((()=>[(0,s.Wm)(A,{label:"All",onClick:a[6]||(a[6]=a=>e.amount=e.balance-25e-5)})])),_:1},8,["modelValue","rules"]),e.me.enableTfa?((0,s.wg)(),(0,s.j4)(y,{key:1,dense:"",class:"q-pa-sm",modelValue:e.tfa,"onUpdate:modelValue":a[8]||(a[8]=a=>e.tfa=a),autofocus:"",label:"2FA",debounce:"500"},null,8,["modelValue"])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)($,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(A,{flat:"",label:"CLOSE",color:"red"},null,512),[[B]]),(0,s.Wm)(A,{flat:"",label:"Widthdrawl",color:"primary",onClick:e.widthdrawl},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var w=t(1914),b=t(4434),f=t(3047),g=t(9968);const y=g.Ps`
  mutation updateUserAddress($_id:String!, $address: String,$label:String){
    updateUserAddress(_id:$_id, address:$address,label: $label){
      _id
      address
      label
    }
  }
`,A=g.Ps`
  mutation createUserAddress($address: String!,$label:String){
    createUserAddress(address:$address,label: $label){
      _id
     address
      label
    }
  }
`,W=(g.Ps`
  mutation deleteUserAddress($_id: String!){
    deleteUserAddress(_id:$_id){
      _id
    }
  }
`,g.Ps`
  query {
  userAddresss{
    _id
    address
    label
  }

  }
`),v=g.Ps`
  mutation createWithdraw($address: String!,$description:String,$amount:Float!,$tfa:String){
    createWithdraw(address:$address,description: $description,amount: $amount,tfa: $tfa){
      _id
      address
      amount
      createdAt
      updatedAt
    }
  }
`,q=g.Ps`
  query {
  withdraws{
    _id
    address
    description
    amount
    txid
    time
    blockhash
    confirmations
    fee
    createdAt
    updatedAt
  }

  }
`;var _,k,Z=t(5777),x=t(5181),C=t(4756),U=t(1949),$=function(e,a,t,s){var d,l=arguments.length,r=l<3?a:null===s?s=Object.getOwnPropertyDescriptor(a,t):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,a,t,s);else for(var o=e.length-1;o>=0;o--)(d=e[o])&&(r=(l<3?d(r):l>3?d(a,t,r):d(a,t))||r);return l>3&&r&&Object.defineProperty(a,t,r),r},T=function(e,a){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,a)};let V=class extends Z.w3{currency;balance;currentPrice;me;showTransition;dialogWithdrawl=!1;timeOut=null;address="";addressWithdrawl="";userAddresss=[];doneAddress="";balanceAddress=0;searchText="";rows=[];initialPagination={sortBy:"txid",descending:!1,page:1,rowsPerPage:10};visibleColumns=["txid","trusted","amount","address","createdAt"];columns=[{name:"txid",required:!0,label:"Txid",align:"left",field:"txid",sortable:!0},{name:"amount",required:!0,label:"Amount",align:"center",field:"amount",sortable:!0},{name:"address",required:!0,label:"Address",align:"center",field:"address",sortable:!0},{name:"blockhash",required:!0,label:"Blockhash",align:"center",field:"blockhash",sortable:!0},{name:"confirmations",required:!0,label:"Confirmations",align:"center",field:"confirmations",sortable:!0},{name:"time",required:!0,label:"Time",align:"center",field:"time",sortable:!0},{name:"timereceived",required:!0,label:"Timereceived",align:"center",field:"timereceived",sortable:!0},{name:"fee",required:!0,label:"Fee",align:"center",field:"fee",sortable:!0},{name:"description",required:!0,label:"Description",align:"center",field:"description",sortable:!0},{name:"createdAt",required:!0,label:"CreatedAt",align:"center",field:"createdAt",sortable:!0}];amount=0;tfa="";loading=!1;transactions=[];tab="wallet";async inputAddress(){console.log("heafasdfsd");try{let e=await this.$apollo.query({query:f.zj,variables:{address:this.addressWithdrawl}});e&&e.data&&e.data.getBalanceByAddress?(this.doneAddress="Done",this.balanceAddress=e.data.getBalanceByAddress.balance||0):(console.log("vafo dday"),this.doneAddress="Address invalid")}catch{this.doneAddress="Address invalid"}}async widthdrawl(){if(console.log("df"),""!==this.addressWithdrawl)if(this.amount>=this.balance)b.Z.create({message:"amount <= balance!!",position:"bottom",color:"red"});else if(this.me.enableTfa&&""===this.tfa)b.Z.create({message:"required 2FA",position:"bottom",color:"red"});else try{let e=await this.$apollo.mutate({mutation:v,variables:{address:this.addressWithdrawl,amount:this.amount,tfa:this.tfa}}).catch((e=>{b.Z.create({message:`Error! ${e.toString()}`,color:"red",position:"bottom"})}));e&&e.data&&e&&e.data.createWithdraw&&(this.dialogWithdrawl=!1,this.amount=0,await this.getWithdraw(),await this.$store.dispatch("balance/getBalance"))}catch(e){}else b.Z.create({message:"Address invalid!",position:"bottom",color:"red"})}copyToClipboard(){(0,w.Z)(this.me.addressRTM).then((()=>{console.log("đầ"),b.Z.create({message:"Coppy!",position:"center"})})).catch((()=>{}))}async getUserAddress(){const e=await this.$apollo.query({query:W});e&&e.data&&(this.userAddresss=e.data?.userAddresss||[],this.userAddresss.length)}async UpdateUserAddress(e){const a=await this.$apollo.mutate({mutation:y,variables:{_id:e._id,address:e.address}});a&&a.data&&b.Z.create({message:"Update Done!",position:"center"})}async addUserAddress(){let e=!1,a=await this.$apollo.query({query:f.zj,variables:{address:this.addressWithdrawl}}).catch((a=>(e=!0,{data:{errors:[],getBalanceByAddress:{balance:0,received:0}}})));if(!(a&&a.data&&a.data.getBalanceByAddress))return console.log("vafo dday"),e=!0,void b.Z.create({message:"Address invalid",color:"red",position:"center"});if(this.balanceAddress=a.data.getBalanceByAddress.balance||0,e)return;const t=await this.$apollo.mutate({mutation:A,variables:{address:this.address}}).catch((e=>{b.Z.create({message:JSON.stringify(e),color:"red",position:"center"})}));t&&t.data&&(b.Z.create({message:"Create Done!",position:"center"}),this.address="",await this.getUserAddress())}showTran(e){window.open("https://explorer.raptoreum.com/tx/"+e.txid,"_blank")}async getWithdraw(){this.loading=!0,console.log("dfasdfasd");const e=await this.$apollo.query({query:q,variables:{}});e&&e.data&&(this.loading=!1,console.log("ffff"),this.transactions=e.data?.withdraws?e.data?.withdraws:[])}async created(){this.$store.dispatch("balance/fetchGetMarketCap").then((()=>{console.log("thuwr")})),await this.$store.dispatch("balance/getBalance"),await this.getWithdraw(),await this.getUserAddress()}};$([(0,x.ZM)((e=>e.balance.currency)),T("design:type","function"===typeof(_="undefined"!==typeof U.Z&&U.Z)?_:Object)],V.prototype,"currency",void 0),$([(0,x.ZM)((e=>e.balance.balance)),T("design:type",Number)],V.prototype,"balance",void 0),$([(0,x.ZM)((e=>e.balance.market?e.balance.market.current_price:1)),T("design:type",Number)],V.prototype,"currentPrice",void 0),$([(0,x.ZM)((e=>e.user.me)),T("design:type","function"===typeof(k="undefined"!==typeof C.e&&C.e)?k:Object)],V.prototype,"me",void 0),$([(0,x.aU)("balance/showTransition"),T("design:type",void 0)],V.prototype,"showTransition",void 0),V=$([(0,Z.Ei)({name:"WithdrawIndex",components:{},computed:{}})],V);const Q=V;var B=t(4260),P=t(4379),S=t(5869),j=t(3414),z=t(4689),R=t(4554),D=t(2165),M=t(2025),O=t(673),F=t(3314),Y=t(8186),N=t(2414),I=t(3884),E=t(6778),H=t(151),K=t(846),L=t(8870),G=t(5589),J=t(9367),X=t(677),ee=t(7518),ae=t.n(ee);const te=(0,B.Z)(Q,[["render",h]]),se=te;ae()(Q,"components",{QPage:P.Z,QSeparator:S.Z,QItem:j.Z,QInput:z.Z,QIcon:R.Z,QBtn:D.Z,QSpace:M.Z,QTable:O.Z,QSelect:F.Z,QTr:Y.Z,QTh:N.Z,QTd:I.Z,QDialog:E.Z,QCard:H.Z,QBar:K.Z,QTooltip:L.Z,QCardSection:G.Z,QCardActions:J.Z}),ae()(Q,"directives",{ClosePopup:X.Z})}}]);