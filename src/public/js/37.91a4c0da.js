"use strict";(self["webpackChunkRaptorNodes"]=self["webpackChunkRaptorNodes"]||[]).push([[37],{5037:(e,a,l)=>{l.r(a),l.d(a,{default:()=>ue});var t=l(3673),o=l(2323),s=l(8880);const i={style:{"max-width":"1024px",margin:"0 auto"}},d={class:"text-h5 text-amber col-12 q-pa-sm"},n={style:{}},r=["src"],u={class:"q-pa-sm"},c=(0,t.Uk)(" Name "),m={class:"text-amber"},p=(0,t.Uk)(" Email "),w={class:"text-amber"},f=(0,t.Uk)(" Private wallet "),b={class:"text-amber"},h=(0,t.Uk)(" discord "),g={class:"text-amber"},_=(0,t.Uk)(" discord Name "),W={class:"text-amber"},v=(0,t.Uk)(" discord Avatar "),y=["src"],k={class:"q-pa-md"};function q(e,a,l,q,U,C){const x=(0,t.up)("q-separator"),$=(0,t.up)("q-space"),D=(0,t.up)("q-btn"),Z=(0,t.up)("q-input"),S=(0,t.up)("q-select"),A=(0,t.up)("q-th"),Q=(0,t.up)("q-tr"),T=(0,t.up)("q-td"),V=(0,t.up)("q-avatar"),z=(0,t.up)("q-item-section"),E=(0,t.up)("q-item"),P=(0,t.up)("q-list"),R=(0,t.up)("q-table"),N=(0,t.up)("q-bar"),j=(0,t.up)("q-card-section"),O=(0,t.up)("q-card-actions"),F=(0,t.up)("q-form"),B=(0,t.up)("q-card"),I=(0,t.up)("q-dialog"),L=(0,t.up)("q-page"),M=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(L,{class:"row items-center justify-evenly q-pa-lg",style:{display:"block"}},{default:(0,t.w5)((()=>[(0,t._)("div",i,[(0,t._)("div",d,(0,o.zw)(e.documentName),1),(0,t.Wm)(x,{spaced:""}),(0,t._)("div",n,[(0,t.Wm)(R,{rows:e.docs,columns:e.columns,"row-key":"_id",dark:"","visible-columns":e.visibleColumns,style:{width:"100%"},filter:e.search,pagination:e.initialPagination,loading:e.loading,class:"card-dark",color:"amber"},{top:(0,t.w5)((()=>[(0,t.Wm)($),(0,t.Wm)(D,{icon:"eva-refresh-outline",round:"",dense:"",style:{"margin-right":"6px"}}),(0,t.Wm)(Z,{modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.search=a),dense:"",placeholder:"Search "+e.documentName+"..."},null,8,["modelValue","placeholder"]),(0,t.Wm)(S,{modelValue:e.visibleColumns,"onUpdate:modelValue":a[1]||(a[1]=a=>e.visibleColumns=a),multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"]),(0,t.Wm)(D,{dense:"",round:"",icon:"eva-cloud-download-outline",onClick:e.exportExcel,color:"blue",class:"q-ma-sm",push:""},null,8,["onClick"])])),header:(0,t.w5)((e=>[(0,t.Wm)(Q,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{"auto-width":""}),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.cols,(a=>((0,t.wg)(),(0,t.j4)(A,{key:a.name,props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,t.w5)((a=>[(0,t.Wm)(Q,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{"auto-width":""},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{size:"md",color:"accent",round:"",dense:"",onClick:e=>a.expand=!a.expand,icon:a.expand?"remove":"eva-eye-outline"},null,8,["onClick","icon"])])),_:2},1024),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.cols,(e=>((0,t.wg)(),(0,t.j4)(T,{key:e.name,props:a},{default:(0,t.w5)((()=>["avatar"===e.name?((0,t.wg)(),(0,t.j4)(V,{key:0},{default:(0,t.w5)((()=>[(0,t._)("img",{src:e.value},null,8,r)])),_:2},1024)):((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[(0,t.Uk)((0,o.zw)(e.value),1)],64))])),_:2},1032,["props"])))),128)),(0,t.Wm)(T,{"auto-width":""},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{size:"sm",class:"text-red",round:"",dense:"",onClick:l=>e.deleteDocument(a.row),icon:"eva-trash-2-outline"},null,8,["onClick"]),(0,t.Wm)(D,{size:"sm",round:"",dense:"",onClick:l=>e.editDocument(a.row),icon:"eva-edit-outline"},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"]),(0,t.wy)((0,t.Wm)(Q,{props:a},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{colspan:"100%"},{default:(0,t.w5)((()=>[(0,t._)("div",u,[(0,t.Wm)(P,{dense:"",style:{"max-width":"440px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[c])),_:1}),(0,t.Wm)(z,{side:""},{default:(0,t.w5)((()=>[(0,t._)("b",m,(0,o.zw)(a.row.profile.name),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(E,{dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[p])),_:1}),(0,t.Wm)(z,{side:""},{default:(0,t.w5)((()=>[(0,t._)("b",w,(0,o.zw)(a.row.email),1)])),_:2},1024),(0,t.Wm)(z,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{icon:"fas fa-copy",onClick:l=>e.coppyEmail(a.row.email),push:"",dense:"",round:"",class:"text-white"},null,8,["onClick"])])),_:2},1024)])),_:2},1024),(0,t.Wm)(E,{dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[f])),_:1}),(0,t.Wm)(z,{side:""},{default:(0,t.w5)((()=>[(0,t._)("b",b,(0,o.zw)(a.row.addressRTM),1)])),_:2},1024)])),_:2},1024),a.row.discord&&""!==a.row.discord?((0,t.wg)(),(0,t.j4)(E,{key:0,dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[h])),_:1}),(0,t.Wm)(z,{side:""},{default:(0,t.w5)((()=>[(0,t._)("b",g,(0,o.zw)(a.row.discord),1)])),_:2},1024)])),_:2},1024)):(0,t.kq)("",!0),(0,t.Wm)(E,{dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[_])),_:1}),(0,t.Wm)(z,{side:""},{default:(0,t.w5)((()=>[(0,t._)("b",W,(0,o.zw)(a.row.profile.discordName),1)])),_:2},1024)])),_:2},1024),a.row.profile.discordAvatar&&""!==a.row.profile.discordAvatar?((0,t.wg)(),(0,t.j4)(E,{key:1,dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[v])),_:1}),(0,t.Wm)(z,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(V,null,{default:(0,t.w5)((()=>[(0,t._)("img",{src:a.row.profile.discordAvatar},null,8,y)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,t.kq)("",!0),(0,t.Wm)(E,{dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(D,{label:a.row.status?"block":"un block",size:"12px",color:"red",dense:"",icon:"block",onClick:l=>e.blockUser(a.row,{status:!a.row.status})},null,8,["label","onClick"])])),_:2},1024),(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(D,{label:"clear 2fa",color:"red",size:"12px",dense:"",icon:"layers_clear",onClick:l=>e.blockUser(a.row,{enabelTfa:!a.row.enabelTfa})},null,8,["onClick"])])),_:2},1024),(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(D,{label:"clear discord",disable:!a.row.discord||""===a.row.discord,size:"12px",color:"blue",dense:"",icon:"remove",onClick:l=>e.blockUser(a.row,{discord:""})},null,8,["disable","onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,t._)("div",k,[(0,t.Wm)(D,{label:"show transition",icon:"storage"}),(0,t.Wm)(D,{label:"user smartnode",class:"text-amber",icon:"eva-eye-outline"})])])])),_:2},1024)])),_:2},1032,["props"]),[[s.F8,a.expand]])])),_:1},8,["rows","columns","visible-columns","filter","pagination","loading"])])]),(0,t.Wm)(I,{modelValue:e.dialog,"onUpdate:modelValue":a[3]||(a[3]=a=>e.dialog=a),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(B,{style:{"min-width":"60vw"}},{default:(0,t.w5)((()=>[(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t._)("div",null,(0,o.zw)(e.isEdit?"Edit ":"Create new")+" "+(0,o.zw)(e.documentName),1),(0,t.Wm)($)])),_:1}),(0,t.Wm)(F,{onSubmit:e.onSubmit},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{style:{overflow:"hidden","min-width":"320px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{class:"q-pa-sm",modelValue:e.doc.label,"onUpdate:modelValue":a[2]||(a[2]=a=>e.doc.label=a),label:"Label",rules:[e=>""!==e||"Label required"]},null,8,["modelValue","rules"])])),_:1}),(0,t.Wm)(O,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(D,{flat:"",label:"CLOSE",color:"red"},null,512),[[M]]),(0,t.Wm)(D,{flat:"",label:e.isEdit?"Update":"Create",color:"primary",type:"submit"},null,8,["label"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(I,{modelValue:e.dialogUpdate,"onUpdate:modelValue":a[5]||(a[5]=a=>e.dialogUpdate=a),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(B,{style:{"min-width":"40vw"}},{default:(0,t.w5)((()=>[(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t._)("div",null,"Update "+(0,o.zw)(e.currentUser.profile?e.currentUser.profile.name:""),1),(0,t.Wm)($)])),_:1}),(0,t.Wm)(F,{onSubmit:e.updateUser},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{style:{overflow:"hidden","min-width":"320px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{class:"q-pa-sm",modelValue:e.tfa,"onUpdate:modelValue":a[4]||(a[4]=a=>e.tfa=a),label:"tfa code",rules:[e=>""!==e||"2fa required"]},null,8,["modelValue","rules"])])),_:1}),(0,t.Wm)(O,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(D,{flat:"",label:"CLOSE",color:"red"},null,512),[[M]]),(0,t.Wm)(D,{flat:"",label:"Ok",color:"primary",type:"submit"})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])])),_:1})}var U=l(8603),C=l(4250),x=l(5777),$=l(1914),D=l(4434),Z=l(9968);const S=Z.Ps`
  mutation updateUser($_id:String!, $status: Boolean,$enableTfa: Boolean,$discord:String,$tfa:String){
    updateUser(_id:$_id,status: $status,enableTfa:$enableTfa,discord: $discord,tfa:$tfa){
      _id
      email
      discord
      createdAt
      updatedAt
    }
  }
`,A=Z.Ps`
  mutation createFaq($answer: String!,$label:String!){
    createFaq(answer:$answer,label: $label){
      _id
      answer
      label
      createdAt
      updatedAt
    }
  }
`,Q=Z.Ps`
  mutation deleteFaq($_id: String!){
    deleteFaq(_id:$_id){
      _id
    }
  }
`,T=Z.Ps`
  query {
    users{
      _id
      enableTfa
      profile{
        name
        picture
        discordName
        discordAvatar
      }
      email
      username
      addressRTM
      rules
      status
      discord
      createdAt
      updatedAt
    }

  }
`;var V=l(8815),z=function(e,a,l,t){var o,s=arguments.length,i=s<3?a:null===t?t=Object.getOwnPropertyDescriptor(a,l):t;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,a,l,t);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(i=(s<3?o(i):s>3?o(a,l,i):o(a,l))||i);return s>3&&i&&Object.defineProperty(a,l,i),i};let E=class extends x.w3{formatPrice=C.T;documentName="User";dialog=!1;isEdit=!1;loading=!1;search="";tfa="";dialogUpdate=!1;variable={status:!0};doc={name:"",email:"",addressRTM:""};currentUser={name:"",email:"",addressRTM:""};docs=[];initialPagination={sortBy:"label",descending:!1,page:1,rowsPerPage:10};visibleColumns=["email","discord","updatedAt"];columns=[{name:"avatar",required:!0,label:"Avatar",align:"left",field:e=>e.profile?e.profile.picture:"",sortable:!0},{name:"name",required:!0,label:"Name",align:"left",field:e=>e.profile?e.profile.name:"",sortable:!0},{name:"email",required:!0,label:"Email",align:"left",field:"email",sortable:!0},{name:"status",required:!0,label:"Status",align:"left",field:"status",sortable:!0},{name:"discord",label:"Discord Id",align:"left",field:"discord",sortable:!0},{name:"Private wallet",label:"private wallet",align:"left",field:"addressRTM",sortable:!0},{name:"name",label:"name",align:"left",field:"profile.name",sortable:!0},{name:"enableTfa",label:"enableTfa",align:"left",field:"enableTfa",sortable:!0},{name:"createdAt",label:"createdAt",align:"center",field:"createdAt",sortable:!0},{name:"updatedAt",label:"updatedAt",align:"center",field:"updatedAt",sortable:!0}];onReset(){this.doc.name="",this.doc.email="",delete this.doc._id}async onSubmit(){this.isEdit?await this.updateDocument():await this.createDocument()}async getDocuments(){this.loading=!0;const e=await this.$apollo.query({query:T});this.docs=e.data.users,this.loading=!1}deleteDocument(e){console.log("haha"),this.$q.dialog({title:"Delete",message:"You may want to delete?",cancel:!0,persistent:!0}).onOk((()=>{this.$apollo.mutate({mutation:Q,variables:{_id:this.doc._id}}).then((()=>{this.getDocuments().then()}))}))}editDocument(e){this.isEdit=!0,this.dialog=!0,this.doc=(0,U.clone)(e)}async updateDocument(){const e=await this.$apollo.mutate({mutation:S,variables:this.doc});e&&e.data?(this.dialog=!1,this.$q.notify({message:"Update Done"}),this.onReset(),this.isEdit=!1,await this.getDocuments()):this.$q.notify({message:"Create error:",color:"red"})}async createDocument(){const e=await this.$apollo.mutate({mutation:A,variables:this.doc});e&&e.data?(this.dialog=!1,this.$q.notify({message:"Create Done"}),this.onReset(),await this.getDocuments()):this.$q.notify({message:"Create error:",color:"red"})}blockUser(e,a){this.currentUser=e,this.dialogUpdate=!0,this.variable=a}async updateUser(){let e=await this.$apollo.mutate({mutation:S,variables:{...this.variable,_id:this.currentUser._id,tfa:this.tfa}}).catch((e=>{const a=`Error!${e.toString()}`;D.Z.create({message:a,position:"bottom"})}));e&&(D.Z.create({message:"Update Done!",position:"bottom"}),await this.getDocuments(),this.dialogUpdate=!1)}coppyEmail(e){(0,$.Z)(e).then((()=>{console.log("đầ"),D.Z.create({message:"Coppy Done!",position:"center"})})).catch((()=>{console.log("")}))}exportExcel(){(0,V.WD)(this.docs,"Users")}async created(){await this.getDocuments()}};E=z([(0,x.Ei)({name:"UserIndex",components:{}})],E);const P=E;var R=l(4260),N=l(4379),j=l(5869),O=l(673),F=l(2165),B=l(2025),I=l(4689),L=l(3314),M=l(8186),Y=l(2414),H=l(3884),K=l(5096),G=l(7011),J=l(3414),X=l(2035),ee=l(6778),ae=l(151),le=l(846),te=l(5269),oe=l(5589),se=l(9367),ie=l(677),de=l(7518),ne=l.n(de);const re=(0,R.Z)(P,[["render",q]]),ue=re;ne()(P,"components",{QPage:N.Z,QSeparator:j.Z,QTable:O.Z,QBtn:F.Z,QSpace:B.Z,QInput:I.Z,QSelect:L.Z,QTr:M.Z,QTh:Y.Z,QTd:H.Z,QAvatar:K.Z,QList:G.Z,QItem:J.Z,QItemSection:X.Z,QDialog:ee.Z,QCard:ae.Z,QBar:le.Z,QForm:te.Z,QCardSection:oe.Z,QCardActions:se.Z}),ne()(P,"directives",{ClosePopup:ie.Z})}}]);